<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã»ã®ã¼ã®ãƒšãƒƒãƒˆãƒ•ãƒ¬ãƒ³ã‚º</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Kiwi+Maru:wght@400;500&display=swap');

        body {
            font-family: 'Kiwi Maru', serif;
            background-color: #fffaf0;
        }

        .pet-card {
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .pet-card:hover {
            transform: translateY(-5px);
        }

        .heart-animation {
            position: absolute;
            pointer-events: none;
            animation: floatUp 1s ease-out forwards;
        }

        @keyframes floatUp {
            0% {
                transform: translateY(0) scale(1);
                opacity: 1;
            }

            100% {
                transform: translateY(-50px) scale(1.5);
                opacity: 0;
            }
        }

        .tab-active {
            border-bottom: 4px solid #fbbf24;
            color: #b45309;
        }

        /* ã‚«ã‚¹ã‚¿ãƒ ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒãƒ¼ */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #fffaf0;
        }

        ::-webkit-scrollbar-thumb {
            background: #fcd34d;
            border-radius: 10px;
        }
    </style>
</head>

<body class="min-h-screen pb-20">

    <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
    <header class="bg-amber-100 p-4 sticky top-0 z-50 shadow-sm border-b border-amber-200">
        <div class="max-w-4xl mx-auto flex justify-between items-center">
            <h1 class="text-2xl font-bold text-amber-800 flex items-center gap-2">
                <span>ğŸ¾</span> ã»ã®ã¼ã®ãƒšãƒƒãƒˆãƒ•ãƒ¬ãƒ³ã‚º
            </h1>
            <div class="bg-white px-4 py-2 rounded-full border-2 border-amber-400 flex items-center gap-2 shadow-inner">
                <span class="text-xl">ğŸ’°</span>
                <span id="coin-balance" class="text-xl font-bold text-amber-700">0</span>
            </div>
        </div>
    </header>

    <main class="max-w-4xl mx-auto p-4">
        <!-- ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã‚¿ãƒ– -->
        <div class="flex mb-6 bg-white rounded-xl shadow-sm overflow-hidden border border-amber-100">
            <button onclick="switchTab('shop')" id="tab-shop"
                class="flex-1 py-4 font-bold text-lg transition-colors tab-active">
                ğŸ›’ ãƒšãƒƒãƒˆã‚·ãƒ§ãƒƒãƒ—
            </button>
            <button onclick="switchTab('collection')" id="tab-collection"
                class="flex-1 py-4 font-bold text-lg transition-colors text-amber-600 hover:bg-amber-50">
                ğŸ  ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ (<span id="collection-count">0</span>)
            </button>
        </div>

        <!-- ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤ºã‚¨ãƒªã‚¢ -->
        <div id="message-container" class="fixed bottom-24 left-1/2 -translate-x-1/2 z-50 pointer-events-none"></div>

        <!-- ã‚·ãƒ§ãƒƒãƒ—ç”»é¢ -->
        <div id="view-shop" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
            <!-- ã‚·ãƒ§ãƒƒãƒ—ã‚¢ã‚¤ãƒ†ãƒ ã¯JSã§ç”Ÿæˆ -->
        </div>

        <!-- ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ç”»é¢ (åˆæœŸã¯éè¡¨ç¤º) -->
        <div id="view-collection" class="hidden grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
            <!-- ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‚¢ã‚¤ãƒ†ãƒ ã¯JSã§ç”Ÿæˆ -->
        </div>
    </main>

    <!-- ãƒ•ãƒƒã‚¿ãƒ¼/ã‚¤ãƒ³ãƒ•ã‚© -->
    <footer class="fixed bottom-0 w-full bg-white border-t border-amber-100 p-4 text-center text-amber-800 text-sm">
        ãƒšãƒƒãƒˆã‚’ã‚¿ãƒƒãƒ—ã—ã¦ã€Œãªã§ãªã§ã€ã™ã‚‹ã¨ã‚³ã‚¤ãƒ³ãŒã‚‚ã‚‰ãˆã‚‹ã‚ˆï¼
    </footer>

    <script>
        // ã‚²ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿
        const PET_DATA = [
            { id: 1, name: 'ã—ã°ã„ã¬', price: 100, emoji: 'ğŸ•', rarity: 'Common', income: 5, color: 'bg-orange-50' },
            { id: 2, name: 'ã¿ã‘ã­ã“', price: 150, emoji: 'ğŸˆ', rarity: 'Common', income: 8, color: 'bg-stone-50' },
            { id: 3, name: 'ã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³ãƒãƒ ', price: 80, emoji: 'ğŸ¹', rarity: 'Common', income: 3, color: 'bg-yellow-50' },
            { id: 4, name: 'ã†ã•ãã•ã‚“', price: 200, emoji: 'ğŸ‡', rarity: 'Rare', income: 15, color: 'bg-rose-50' },
            { id: 5, name: 'ã‚ªã‚«ãƒ¡ã‚¤ãƒ³ã‚³', price: 180, emoji: 'ğŸ¦œ', rarity: 'Rare', income: 12, color: 'bg-emerald-50' },
            { id: 6, name: 'ãƒšãƒ³ã‚®ãƒ³', price: 500, emoji: 'ğŸ§', rarity: 'Super Rare', income: 40, color: 'bg-blue-50' },
            { id: 7, name: 'ãƒ‘ãƒ³ãƒ€', price: 1000, emoji: 'ğŸ¼', rarity: 'Super Rare', income: 100, color: 'bg-gray-50' },
            { id: 8, name: 'ãƒ¦ãƒ‹ã‚³ãƒ¼ãƒ³', price: 5000, emoji: 'ğŸ¦„', rarity: 'Legendary', income: 500, color: 'bg-purple-50' },
            { id: 9, name: 'ãƒ‰ãƒ©ã‚´ãƒ³', price: 9999, emoji: 'ğŸ²', rarity: 'Legendary', income: 1000, color: 'bg-red-50' }
        ];

        // çŠ¶æ…‹ç®¡ç†
        let state = {
            coins: 200, // åˆæœŸã‚³ã‚¤ãƒ³
            myPets: []  // è³¼å…¥ã—ãŸãƒšãƒƒãƒˆã®IDãƒªã‚¹ãƒˆ
        };

        // åˆæœŸåŒ–
        window.onload = () => {
            renderShop();
            renderCollection();
            updateStats();
        };

        // UIæ›´æ–°: çµ±è¨ˆ
        function updateStats() {
            document.getElementById('coin-balance').innerText = state.coins.toLocaleString();
            document.getElementById('collection-count').innerText = state.myPets.length;
            renderShop(); // è³¼å…¥å¯èƒ½çŠ¶æ…‹ã‚’æ›´æ–°ã™ã‚‹ãŸã‚ã«å†æç”»
        }

        // ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆ
        function switchTab(tab) {
            const shopView = document.getElementById('view-shop');
            const collectionView = document.getElementById('view-collection');
            const shopTab = document.getElementById('tab-shop');
            const collectionTab = document.getElementById('tab-collection');

            if (tab === 'shop') {
                shopView.classList.remove('hidden');
                collectionView.classList.add('hidden');
                shopTab.classList.add('tab-active');
                collectionTab.classList.remove('tab-active');
                renderShop();
            } else {
                shopView.classList.add('hidden');
                collectionView.classList.remove('hidden');
                shopTab.classList.remove('tab-active');
                collectionTab.classList.add('tab-active');
                renderCollection();
            }
        }

        // ã‚·ãƒ§ãƒƒãƒ—æç”»
        function renderShop() {
            const container = document.getElementById('view-shop');
            container.innerHTML = '';

            PET_DATA.forEach(pet => {
                const isOwned = state.myPets.includes(pet.id);
                const canAfford = state.coins >= pet.price;

                const card = document.createElement('div');
                card.className = `pet-card bg-white rounded-2xl p-6 shadow-md border-2 ${isOwned ? 'border-gray-200 opacity-75' : 'border-amber-100'}`;

                card.innerHTML = `
                    <div class="text-6xl mb-4 text-center">${pet.emoji}</div>
                    <div class="text-center">
                        <span class="text-xs font-bold px-2 py-1 rounded-full ${getRarityClass(pet.rarity)}">${pet.rarity}</span>
                        <h3 class="text-xl font-bold text-amber-900 mt-2">${pet.name}</h3>
                        <p class="text-amber-600 text-sm mt-1">ãªã§ãªã§: +${pet.income}ã‚³ã‚¤ãƒ³</p>
                        <div class="mt-4">
                            ${isOwned ?
                        `<button disabled class="w-full bg-gray-100 text-gray-400 py-2 rounded-xl font-bold">ãŠè¿ãˆæ¸ˆã¿</button>` :
                        `<button onclick="buyPet(${pet.id})" 
                                    class="w-full ${canAfford ? 'bg-amber-400 hover:bg-amber-500 text-white' : 'bg-gray-200 text-gray-500 cursor-not-allowed'} 
                                    py-2 rounded-xl font-bold transition-colors">
                                    ğŸ’° ${pet.price.toLocaleString()}
                                </button>`
                    }
                        </div>
                    </div>
                `;
                container.appendChild(card);
            });
        }

        // ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³æç”»
        function renderCollection() {
            const container = document.getElementById('view-collection');
            container.innerHTML = '';

            if (state.myPets.length === 0) {
                container.innerHTML = `
                    <div class="col-span-full py-20 text-center">
                        <p class="text-amber-400 text-5xl mb-4">ğŸ </p>
                        <p class="text-amber-800 font-bold text-xl">ã¾ã ãƒšãƒƒãƒˆãŒã„ã¾ã›ã‚“</p>
                        <p class="text-amber-600">ã‚·ãƒ§ãƒƒãƒ—ã§ãŠè¿ãˆã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼</p>
                    </div>
                `;
                return;
            }

            state.myPets.forEach(petId => {
                const pet = PET_DATA.find(p => p.id === petId);
                const card = document.createElement('div');
                card.className = `pet-card ${pet.color} rounded-2xl p-6 shadow-md border-2 border-white relative overflow-hidden cursor-pointer select-none`;
                card.onclick = (e) => petAnimal(e, pet);

                card.innerHTML = `
                    <div class="text-6xl mb-4 text-center transform transition-transform hover:scale-110">${pet.emoji}</div>
                    <div class="text-center">
                        <span class="text-xs font-bold px-2 py-1 rounded-full ${getRarityClass(pet.rarity)}">${pet.rarity}</span>
                        <h3 class="text-xl font-bold text-amber-900 mt-2">${pet.name}</h3>
                        <p class="text-xs text-amber-400 mt-2">ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãªã§ãªã§ï¼</p>
                    </div>
                `;
                container.appendChild(card);
            });
        }

        // ãƒšãƒƒãƒˆè³¼å…¥
        function buyPet(id) {
            const pet = PET_DATA.find(p => p.id === id);
            if (state.coins >= pet.price && !state.myPets.includes(id)) {
                state.coins -= pet.price;
                state.myPets.push(id);
                updateStats();
                showMessage(`${pet.name}ãŒãŠå®¶ã«æ¥ã¾ã—ãŸï¼âœ¨`);
            } else if (state.coins < pet.price) {
                showMessage(`ã‚³ã‚¤ãƒ³ãŒè¶³ã‚Šã¾ã›ã‚“...ğŸ˜¢`);
            }
        }

        // ãªã§ãªã§ï¼ˆã‚³ã‚¤ãƒ³ç²å¾—ï¼‰
        function petAnimal(event, pet) {
            // ã‚³ã‚¤ãƒ³åŠ ç®—
            state.coins += pet.income;
            updateStats();

            // ãƒãƒ¼ãƒˆã¨ãƒ†ã‚­ã‚¹ãƒˆã®ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ
            const rect = event.currentTarget.getBoundingClientRect();
            createFloatingEffect(event.clientX, event.clientY, 'â¤ï¸');
            createFloatingEffect(event.clientX, event.clientY - 20, `+${pet.income}`, 'text-amber-600 font-bold');
        }

        // ã‚¨ãƒ•ã‚§ã‚¯ãƒˆç”Ÿæˆ
        function createFloatingEffect(x, y, content, className = "") {
            const el = document.createElement('div');
            el.className = `heart-animation fixed z-50 pointer-events-none ${className}`;
            el.style.left = `${x}px`;
            el.style.top = `${y}px`;
            el.innerText = content;
            document.body.appendChild(el);
            setTimeout(() => el.remove(), 1000);
        }

        // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º
        function showMessage(text) {
            const container = document.getElementById('message-container');
            const msg = document.createElement('div');
            msg.className = "bg-amber-800 text-white px-6 py-3 rounded-full shadow-lg mb-2 animate-bounce flex items-center gap-2";
            msg.innerHTML = `<span>ğŸ””</span> ${text}`;
            container.appendChild(msg);
            setTimeout(() => {
                msg.style.opacity = '0';
                msg.style.transition = 'opacity 0.5s';
                setTimeout(() => msg.remove(), 500);
            }, 2000);
        }

        // ãƒ¬ã‚¢åº¦ã«å¿œã˜ãŸã‚¯ãƒ©ã‚¹
        function getRarityClass(rarity) {
            switch (rarity) {
                case 'Common': return 'bg-gray-100 text-gray-600';
                case 'Rare': return 'bg-blue-100 text-blue-600';
                case 'Super Rare': return 'bg-purple-100 text-purple-600';
                case 'Legendary': return 'bg-yellow-100 text-yellow-700 border border-yellow-300';
                default: return 'bg-gray-100';
            }
        }
    </script>
</body>

</html>